{"id":640,"date":"2023-06-05T09:51:39","date_gmt":"2023-06-05T09:51:39","guid":{"rendered":"http:\/\/localhost\/everyone\/?p=640"},"modified":"2023-06-05T09:51:39","modified_gmt":"2023-06-05T09:51:39","slug":"how-i-turned-my-companys-docs-into-a-searchable-database-with-openai","status":"publish","type":"post","link":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/","title":{"rendered":"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI"},"content":{"rendered":"<p>For the past six months, I\u2019ve been working at series A startup Voxel51, a and creator of the open source computer vision toolkit FiftyOne. As a machine learning engineer and developer evangelist, my job is to listen to our open source community and bring them what they need \u2014 new features, integrations, tutorials, workshops, you name it.<\/p>\n<p>A few weeks ago, we added native support for vector search engines and text similarity queries to FiftyOne, so that users can find the most relevant images in their (often massive \u2014 containing millions or tens of millions of samples) datasets, via simple natural language queries.<\/p>\n<p>This put us in a curious position: it was now possible for people using open source FiftyOne to readily search datasets with natural language queries, but using our documentation still required traditional keyword search.<\/p>\n<p>We have a lot of documentation, which has its pros and cons. As a user myself, I sometimes find that given the sheer quantity of documentation, finding precisely what I\u2019m looking for requires more time than I\u2019d like.<\/p>\n<p>I was not going to let this fly\u2026 so I built this in my spare time:<\/p>\n<p>So, here\u2019s how I turned our docs into a semantically searchable vector database:<\/p>\n<p>Converted all of the docs to a unified format<br \/>\nSplit docs into blocks and added some automated cleanup<br \/>\nComputed embeddings for each block<br \/>\nGenerated a vector index from these embedding<br \/>\nDefined the index query<br \/>\nWrapped it all in a user-friendly command line interface and Python API<br \/>\nYou can find all the code for this post in the voxel51\/fiftyone-docs-search repo, and it\u2019s easy to install the package locally in edit mode with pip install -e ..<\/p>\n<p>Better yet, if you want to implement semantic search for your own website using this method, you can follow along! Here are the ingredients you\u2019ll need:<\/p>\n<p>Install the openai Python package and create an account: you will use this account to send your docs and queries to an inference endpoint, which will return an embedding vector for each piece of text.<br \/>\nInstall the qdrant-client Python package and launch a Qdrant server via Docker: you will use Qdrant to create a locally hosted vector index for the docs, against which queries will be run. The Qdrant service will run inside a Docker container.<br \/>\nConverting the docs to a unified format<br \/>\nMy company\u2019s docs are all hosted as HTML documents at https:\/\/docs.voxel51.com. A natural starting point would have been to download these docs with Python\u2019s requests library and parse the document with Beautiful Soup.<\/p>\n<p>As a developer (and author of many of our docs), however, I thought I could do better. I already had a working clone of the GitHub repository on my local computer that contained all of the raw files used to generate the HTML docs. Some of our docs are written in Sphinx ReStructured Text (RST), whereas others, like tutorials, are converted to HTML from Jupyter notebooks.<\/p>\n<p>I figured (mistakenly) that the closer I could get to the raw text of the RST and Jupyter files, the simpler things would be.<\/p>\n<p>RST<br \/>\nIn RST documents, sections are delineated by lines consisting only of strings of =, &#8211; or _. For example, here\u2019s a document from the FiftyOne User Guide which contains all three delineators:<\/p>\n<p>I could then remove all of the RST keywords, such as toctree, code-block, and button_link (there were many more), as well as the :, ::, and .. that accompanied a keyword, the start of a new block, or block descriptors.<\/p>\n<p>Links were easy to take care of too:<\/p>\n<p>Things started to get dicey when I wanted to extract the section anchors from RST files. Many of our sections had anchors specified explicitly, whereas others were left to be inferred during the conversion to HTML.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>For the past six months, I\u2019ve been working at series A startup Voxel51, a and creator of the open source computer vision toolkit FiftyOne. As<\/p>\n","protected":false},"author":1,"featured_media":641,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[27],"tags":[],"yoast_head":"<!-- This site is optimized with the Yoast SEO plugin v20.8 - https:\/\/yoast.com\/wordpress\/plugins\/seo\/ -->\r\n<title>How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI - Swap Corsair<\/title>\r\n<meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1\" \/>\r\n<link rel=\"canonical\" href=\"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\" \/>\r\n<meta property=\"og:locale\" content=\"en_US\" \/>\r\n<meta property=\"og:type\" content=\"article\" \/>\r\n<meta property=\"og:title\" content=\"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI - Swap Corsair\" \/>\r\n<meta property=\"og:description\" content=\"For the past six months, I\u2019ve been working at series A startup Voxel51, a and creator of the open source computer vision toolkit FiftyOne. As\" \/>\r\n<meta property=\"og:url\" content=\"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\" \/>\r\n<meta property=\"og:site_name\" content=\"Swap Corsair\" \/>\r\n<meta property=\"article:published_time\" content=\"2023-06-05T09:51:39+00:00\" \/>\r\n<meta property=\"og:image\" content=\"http:\/\/localhost\/everyone\/wp-content\/uploads\/2023\/06\/1_rsp22rKwFD01.webp\" \/>\r\n\t<meta property=\"og:image:width\" content=\"720\" \/>\r\n\t<meta property=\"og:image:height\" content=\"480\" \/>\r\n\t<meta property=\"og:image:type\" content=\"image\/webp\" \/>\r\n<meta name=\"author\" content=\"Admin\" \/>\r\n<meta name=\"twitter:card\" content=\"summary_large_image\" \/>\r\n<meta name=\"twitter:label1\" content=\"Written by\" \/>\n\t<meta name=\"twitter:data1\" content=\"Admin\" \/>\n\t<meta name=\"twitter:label2\" content=\"Est. reading time\" \/>\n\t<meta name=\"twitter:data2\" content=\"3 minutes\" \/>\r\n<script type=\"application\/ld+json\" class=\"yoast-schema-graph\">{\r\n\t    \"@context\": \"https:\/\/schema.org\",\r\n\t    \"@graph\": [\r\n\t        {\r\n\t            \"@type\": \"Article\",\r\n\t            \"@id\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#article\",\r\n\t            \"isPartOf\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\"\r\n\t            },\r\n\t            \"author\": {\r\n\t                \"name\": \"Admin\",\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#\/schema\/person\/59c338bbc7071a962783a64491797fd6\"\r\n\t            },\r\n\t            \"headline\": \"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI\",\r\n\t            \"datePublished\": \"2023-06-05T09:51:39+00:00\",\r\n\t            \"dateModified\": \"2023-06-05T09:51:39+00:00\",\r\n\t            \"mainEntityOfPage\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\"\r\n\t            },\r\n\t            \"wordCount\": 647,\r\n\t            \"commentCount\": 0,\r\n\t            \"publisher\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#organization\"\r\n\t            },\r\n\t            \"articleSection\": [\r\n\t                \"News\"\r\n\t            ],\r\n\t            \"inLanguage\": \"en-US\",\r\n\t            \"potentialAction\": [\r\n\t                {\r\n\t                    \"@type\": \"CommentAction\",\r\n\t                    \"name\": \"Comment\",\r\n\t                    \"target\": [\r\n\t                        \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#respond\"\r\n\t                    ]\r\n\t                }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            \"@type\": \"WebPage\",\r\n\t            \"@id\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\",\r\n\t            \"url\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\",\r\n\t            \"name\": \"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI - Swap Corsair\",\r\n\t            \"isPartOf\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#website\"\r\n\t            },\r\n\t            \"datePublished\": \"2023-06-05T09:51:39+00:00\",\r\n\t            \"dateModified\": \"2023-06-05T09:51:39+00:00\",\r\n\t            \"breadcrumb\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#breadcrumb\"\r\n\t            },\r\n\t            \"inLanguage\": \"en-US\",\r\n\t            \"potentialAction\": [\r\n\t                {\r\n\t                    \"@type\": \"ReadAction\",\r\n\t                    \"target\": [\r\n\t                        \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/\"\r\n\t                    ]\r\n\t                }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            \"@type\": \"BreadcrumbList\",\r\n\t            \"@id\": \"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#breadcrumb\",\r\n\t            \"itemListElement\": [\r\n\t                {\r\n\t                    \"@type\": \"ListItem\",\r\n\t                    \"position\": 1,\r\n\t                    \"name\": \"Home\",\r\n\t                    \"item\": \"http:\/\/localhost\/everyone\/\"\r\n\t                },\r\n\t                {\r\n\t                    \"@type\": \"ListItem\",\r\n\t                    \"position\": 2,\r\n\t                    \"name\": \"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI\"\r\n\t                }\r\n\t            ]\r\n\t        },\r\n\t        {\r\n\t            \"@type\": \"WebSite\",\r\n\t            \"@id\": \"http:\/\/localhost\/everyone\/#website\",\r\n\t            \"url\": \"http:\/\/localhost\/everyone\/\",\r\n\t            \"name\": \"Swap Corsair\",\r\n\t            \"description\": \"\",\r\n\t            \"publisher\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#organization\"\r\n\t            },\r\n\t            \"potentialAction\": [\r\n\t                {\r\n\t                    \"@type\": \"SearchAction\",\r\n\t                    \"target\": {\r\n\t                        \"@type\": \"EntryPoint\",\r\n\t                        \"urlTemplate\": \"http:\/\/localhost\/everyone\/?s={search_term_string}\"\r\n\t                    },\r\n\t                    \"query-input\": \"required name=search_term_string\"\r\n\t                }\r\n\t            ],\r\n\t            \"inLanguage\": \"en-US\"\r\n\t        },\r\n\t        {\r\n\t            \"@type\": \"Organization\",\r\n\t            \"@id\": \"http:\/\/localhost\/everyone\/#organization\",\r\n\t            \"name\": \"Swap Corsair\",\r\n\t            \"url\": \"http:\/\/localhost\/everyone\/\",\r\n\t            \"logo\": {\r\n\t                \"@type\": \"ImageObject\",\r\n\t                \"inLanguage\": \"en-US\",\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#\/schema\/logo\/image\/\",\r\n\t                \"url\": \"http:\/\/localhost\/everyone\/wp-content\/uploads\/2023\/06\/swap.png\",\r\n\t                \"contentUrl\": \"http:\/\/localhost\/everyone\/wp-content\/uploads\/2023\/06\/swap.png\",\r\n\t                \"width\": 999,\r\n\t                \"height\": 318,\r\n\t                \"caption\": \"Swap Corsair\"\r\n\t            },\r\n\t            \"image\": {\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#\/schema\/logo\/image\/\"\r\n\t            }\r\n\t        },\r\n\t        {\r\n\t            \"@type\": \"Person\",\r\n\t            \"@id\": \"http:\/\/localhost\/everyone\/#\/schema\/person\/59c338bbc7071a962783a64491797fd6\",\r\n\t            \"name\": \"Admin\",\r\n\t            \"image\": {\r\n\t                \"@type\": \"ImageObject\",\r\n\t                \"inLanguage\": \"en-US\",\r\n\t                \"@id\": \"http:\/\/localhost\/everyone\/#\/schema\/person\/image\/\",\r\n\t                \"url\": \"http:\/\/1.gravatar.com\/avatar\/d8d183560fb030c46173b76e7103c173?s=96&d=mm&r=g\",\r\n\t                \"contentUrl\": \"http:\/\/1.gravatar.com\/avatar\/d8d183560fb030c46173b76e7103c173?s=96&d=mm&r=g\",\r\n\t                \"caption\": \"Admin\"\r\n\t            },\r\n\t            \"sameAs\": [\r\n\t                \"http:\/\/localhost\/everyone\"\r\n\t            ],\r\n\t            \"url\": \"http:\/\/localhost\/everyone\/author\/admin\/\"\r\n\t        }\r\n\t    ]\r\n\t}<\/script>\r\n<!-- \/ Yoast SEO plugin. -->","yoast_head_json":{"title":"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI - Swap Corsair","robots":{"index":"index","follow":"follow","max-snippet":"max-snippet:-1","max-image-preview":"max-image-preview:large","max-video-preview":"max-video-preview:-1"},"canonical":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/","og_locale":"en_US","og_type":"article","og_title":"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI - Swap Corsair","og_description":"For the past six months, I\u2019ve been working at series A startup Voxel51, a and creator of the open source computer vision toolkit FiftyOne. As","og_url":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/","og_site_name":"Swap Corsair","article_published_time":"2023-06-05T09:51:39+00:00","og_image":[{"width":720,"height":480,"url":"http:\/\/localhost\/everyone\/wp-content\/uploads\/2023\/06\/1_rsp22rKwFD01.webp","type":"image\/webp"}],"author":"Admin","twitter_card":"summary_large_image","twitter_misc":{"Written by":"Admin","Est. reading time":"3 minutes"},"schema":{"@context":"https:\/\/schema.org","@graph":[{"@type":"Article","@id":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#article","isPartOf":{"@id":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/"},"author":{"name":"Admin","@id":"http:\/\/localhost\/everyone\/#\/schema\/person\/59c338bbc7071a962783a64491797fd6"},"headline":"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI","datePublished":"2023-06-05T09:51:39+00:00","dateModified":"2023-06-05T09:51:39+00:00","mainEntityOfPage":{"@id":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/"},"wordCount":647,"commentCount":0,"publisher":{"@id":"http:\/\/localhost\/everyone\/#organization"},"articleSection":["News"],"inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#respond"]}]},{"@type":"WebPage","@id":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/","url":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/","name":"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI - Swap Corsair","isPartOf":{"@id":"http:\/\/localhost\/everyone\/#website"},"datePublished":"2023-06-05T09:51:39+00:00","dateModified":"2023-06-05T09:51:39+00:00","breadcrumb":{"@id":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/"]}]},{"@type":"BreadcrumbList","@id":"http:\/\/localhost\/everyone\/how-i-turned-my-companys-docs-into-a-searchable-database-with-openai\/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"http:\/\/localhost\/everyone\/"},{"@type":"ListItem","position":2,"name":"How I Turned My Company\u2019s Docs into a Searchable Database with OpenAI"}]},{"@type":"WebSite","@id":"http:\/\/localhost\/everyone\/#website","url":"http:\/\/localhost\/everyone\/","name":"Swap Corsair","description":"","publisher":{"@id":"http:\/\/localhost\/everyone\/#organization"},"potentialAction":[{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"http:\/\/localhost\/everyone\/?s={search_term_string}"},"query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"Organization","@id":"http:\/\/localhost\/everyone\/#organization","name":"Swap Corsair","url":"http:\/\/localhost\/everyone\/","logo":{"@type":"ImageObject","inLanguage":"en-US","@id":"http:\/\/localhost\/everyone\/#\/schema\/logo\/image\/","url":"http:\/\/localhost\/everyone\/wp-content\/uploads\/2023\/06\/swap.png","contentUrl":"http:\/\/localhost\/everyone\/wp-content\/uploads\/2023\/06\/swap.png","width":999,"height":318,"caption":"Swap Corsair"},"image":{"@id":"http:\/\/localhost\/everyone\/#\/schema\/logo\/image\/"}},{"@type":"Person","@id":"http:\/\/localhost\/everyone\/#\/schema\/person\/59c338bbc7071a962783a64491797fd6","name":"Admin","image":{"@type":"ImageObject","inLanguage":"en-US","@id":"http:\/\/localhost\/everyone\/#\/schema\/person\/image\/","url":"http:\/\/1.gravatar.com\/avatar\/d8d183560fb030c46173b76e7103c173?s=96&d=mm&r=g","contentUrl":"http:\/\/1.gravatar.com\/avatar\/d8d183560fb030c46173b76e7103c173?s=96&d=mm&r=g","caption":"Admin"},"sameAs":["http:\/\/localhost\/everyone"],"url":"http:\/\/localhost\/everyone\/author\/admin\/"}]}},"_links":{"self":[{"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/posts\/640"}],"collection":[{"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/comments?post=640"}],"version-history":[{"count":1,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/posts\/640\/revisions"}],"predecessor-version":[{"id":642,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/posts\/640\/revisions\/642"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/media\/641"}],"wp:attachment":[{"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/media?parent=640"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/categories?post=640"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/everyone\/wp-json\/wp\/v2\/tags?post=640"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}